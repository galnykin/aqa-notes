# –ü—Ä–∞–∫—Ç–∏–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –≤ CI/CD

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Å–æ–±–µ–Ω–Ω–æ –º–æ—â–Ω—ã–º, –∫–æ–≥–¥–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –æ–±—â–∏–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–±–æ—Ä–æ–∫ –∏ –ø–æ–ª—É—á–∞—Ç—å –æ—Ç—á—ë—Ç—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –ù–∏–∂–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è CI/CD, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ä–µ–¥—ã, —Ä–∞–±–æ—Ç–∞ —Å Jenkins –∏ GitHub Actions, –∞ —Ç–∞–∫–∂–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤.

-----

## üß≠ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏ –ø–æ–Ω—è—Ç–∏—è: CI/CD

- **CI (Continuous Integration / –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)** ‚Äî —ç—Ç–æ –ø—Ä–∞–∫—Ç–∏–∫–∞, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ —Å–ª–∏–≤–∞—é—Ç —Å–≤–æ–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–ª–∏—è–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞** –ø—Ä–æ–µ–∫—Ç–∞ –∏ **–∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤**. –ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî —Ä–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

- **CD (Continuous Delivery or Deployment / –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –∏–ª–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ)** ‚Äî —ç—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –ø–æ—Å–ª–µ CI.

  - **Continuous Delivery**: –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —Å–±–æ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `staging`), –≥–¥–µ –≥–æ—Ç–æ–≤–∞ –∫ —Ä—É—á–Ω–æ–º—É —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ `production`.
  - **Continuous Deployment**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –≥–¥–µ —É—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–µ—Ç—Å—è** –≤ `production` –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞.

**–ö–ª—é—á–µ–≤–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è**: "Fail fast, fail often" (–ü–∞–¥–∞–π –±—ã—Å—Ç—Ä–æ, –ø–∞–¥–∞–π —á–∞—Å—Ç–æ). –ß–µ–º —Ä–∞–Ω—å—à–µ –±—É–¥–µ—Ç –Ω–∞–π–¥–µ–Ω–∞ –æ—à–∏–±–∫–∞, —Ç–µ–º –¥–µ—à–µ–≤–ª–µ –µ—ë –∏—Å–ø—Ä–∞–≤–∏—Ç—å.

-----

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å—Ä–µ–¥—ã

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (CI agent) —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ.

- **JDK**: Java Development Kit. –í–µ—Ä—Å–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–≥–æ —Ç–æ–π –∂–µ, —á—Ç–æ –∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ (`Java 17+`).
- **Git**: –î–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
- **Maven**: –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤.
- **Allure Commandline**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTML-–æ—Ç—á—ë—Ç–∞ –∏–∑ `allure-results`.
- **CI-—Å–µ—Ä–≤–µ—Ä**: –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å. –ù–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ ‚Äî **Jenkins** –∏ **GitHub Actions**.

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥: Docker

–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ "–∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è" CI-—Å–µ—Ä–≤–µ—Ä–∞, –≤—Å—ë —á–∞—â–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **Docker**. –°—Ä–µ–¥–∞ –¥–ª—è —Å–±–æ—Ä–∫–∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `Dockerfile`, —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –µ—ë –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å –Ω–∞ –º–∞—à–∏–Ω–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ –≤ CI. **Testcontainers** –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤ –∏–ª–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –ø—Ä—è–º–æ –∏–∑ —Ç–µ—Å—Ç–æ–≤, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø–æ–ª–Ω—É—é –∏–∑–æ–ª—è—Ü–∏—é.

-----

## üß∞ CI/CD –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: Jenkins vs GitHub Actions

### Jenkins: Pipeline as Code

**Jenkins** ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π, –º–æ—â–Ω—ã–π –∏ –≥–∏–±–∫–∏–π open-source —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–±–æ—Ç–µ —Å Jenkins ‚Äî **Pipeline as Code**, –≥–¥–µ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `Jenkinsfile`, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤–º–µ—Å—Ç–µ —Å –∫–æ–¥–æ–º.

**–ü—Ä–∏–º–µ—Ä `Jenkinsfile` (Declarative Pipeline):**

```groovy
pipeline {
    agent any // –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –ª—é–±–æ–º –¥–æ—Å—Ç—É–ø–Ω–æ–º –∞–≥–µ–Ω—Ç–µ

    tools {
        maven 'Maven-3.8.6' // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Maven, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ Jenkins
        jdk 'JDK-17'        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JDK, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ Jenkins
    }

    stages {
        stage('Checkout') {
            steps {
                // –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
                git branch: 'main', url: 'https://github.com/your-repo/test-automated-framework.git'
            }
        }
        
        stage('Run Tests') {
            steps {
                // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã —Å –ø–æ–º–æ—â—å—é Maven
                // sh - –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è shell
                sh 'mvn clean test'
            }
        }
    }
    
    post {
        // –ë–ª–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ –≤—Å–µ—Ö —Å—Ç–∞–¥–∏–π
        always {
            // –ê—Ä—Ö–∏–≤–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è Allure-–ø–ª–∞–≥–∏–Ω–∞
            allure includeProperties: false, 
                   reportBuildPolicy: 'ALWAYS', 
                   results: [[path: 'target/allure-results']]
        }
    }
}
```

### GitHub Actions: –ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**GitHub Actions** ‚Äî —ç—Ç–æ CI/CD –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞–ø—Ä—è–º—É—é –≤ GitHub. –û–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `.yml` —Ñ–∞–π–ª–æ–≤, —Ö—Ä–∞–Ω—è—â–∏—Ö—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `.github/workflows`. –≠—Ç–æ –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∏ –ø—Ä–æ—Å—Ç–æ–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤, —Ä–∞–∑–º–µ—â—ë–Ω–Ω—ã—Ö –Ω–∞ GitHub.

**–ü—Ä–∏–º–µ—Ä `.github/workflows/main.yml`:**

```yaml
name: Run Automated Tests

on:
  push:
    branches: [ main ] # –¢—Ä–∏–≥–≥–µ—Ä: –ø—É—à –≤ –≤–µ—Ç–∫—É main
  pull_request:
    branches: [ main ] # –¢—Ä–∏–≥–≥–µ—Ä: —Å–æ–∑–¥–∞–Ω–∏–µ Pull Request –≤ main

jobs:
  build:
    runs-on: ubuntu-latest # –ó–∞–ø—É—Å–∫ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ —Å Ubuntu

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3 # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

    - name: Set up JDK 17
      uses: actions/setup-java@v3 # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Java
      with:
        java-version: '17'
        distribution: 'temurin'
        cache: 'maven' # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Maven

    - name: Run tests with Maven
      run: mvn clean test # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

    - name: Generate Allure Report
      uses: simple-elf/allure-report-action@v1.7
      if: always() # –í—ã–ø–æ–ª–Ω–∏—Ç—å —à–∞–≥, –¥–∞–∂–µ –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã —É–ø–∞–ª–∏
      with:
        report_dir: target/allure-report
        results_dir: target/allure-results
        
    - name: Deploy report to GitHub Pages
      if: always()
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./target/allure-report
```

-----

## üîó –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –¥–ª—è CI/CD

–ß—Ç–æ–±—ã —Ç–µ—Å—Ç—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–∞ CI-—Å–µ—Ä–≤–µ—Ä–µ, —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫ —ç—Ç–æ–º—É –≥–æ—Ç–æ–≤.

### 1\. Headless-—Ä–µ–∂–∏–º –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤

–ù–∞ CI-—Å–µ—Ä–≤–µ—Ä–∞—Ö –Ω–µ—Ç –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –ø–æ—ç—Ç–æ–º—É –±—Ä–∞—É–∑–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –≤ **headless-—Ä–µ–∂–∏–º–µ** (–±–µ–∑ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –æ–∫–Ω–∞).

**–ü—Ä–∏–º–µ—Ä –¥–ª—è Chrome –≤ `WebDriverFactory`:**

```java
import org.openqa.selenium.chrome.ChromeOptions;

ChromeOptions options = new ChromeOptions();
// –ê—Ä–≥—É–º–µ–Ω—Ç—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ headless-—Ä–µ–∂–∏–º–µ
options.addArguments("--headless");
options.addArguments("--disable-gpu");
options.addArguments("--window-size=1920,1080");
options.addArguments("--no-sandbox"); // –í–∞–∂–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ Docker/Linux

WebDriver driver = new ChromeDriver(options);
```

### 2\. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

–ù–µ–ª—å–∑—è "–∑–∞—à–∏–≤–∞—Ç—å" –≤ –∫–æ–¥ URL, –ª–æ–≥–∏–Ω—ã –∏ –ø–∞—Ä–æ–ª–∏. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –∏–∑–≤–Ω–µ –≤–æ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ **—Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (system properties)**.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –∏–∑ CI:**
`mvn clean test -Denv=stage -Dbrowser=headless_chrome`

**–ß—Ç–µ–Ω–∏–µ –≤ –∫–æ–¥–µ:**
`String environment = System.getProperty("env", "dev"); // "dev" - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é`

### 3\. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏

–î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –æ—à–∏–±–æ–∫ –≤ **Allure-–æ—Ç—á—ë—Ç–µ** –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã —Å–∫—Ä–∏–Ω—à–æ—Ç—ã. –≠—Ç–æ –ª–µ–≥–∫–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é **JUnit 5 `TestWatcher`**.

```java
import io.qameta.allure.Attachment;
import org.junit.jupiter.api.extension.ExtensionContext;
import org.junit.jupiter.api.extension.TestWatcher;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import org.openqa.selenium.WebDriver;

public class AllureTestWatcher implements TestWatcher {

    @Override
    public void testFailed(ExtensionContext context, Throwable cause) {
        WebDriver driver = WebDriverFactory.getDriver(); // –ü–æ–ª—É—á–∞–µ–º –¥—Ä–∞–π–≤–µ—Ä –∏–∑ –Ω–∞—à–µ–π —Ñ–∞–±—Ä–∏–∫–∏
        if (driver instanceof TakesScreenshot) {
            saveScreenshot(((TakesScreenshot) driver).getScreenshotAs(OutputType.BYTES));
        }
    }

    @Attachment(value = "Screenshot on failure", type = "image/png")
    private byte[] saveScreenshot(byte[] screenShot) {
        return screenShot;
    }
}
```

–≠—Ç–æ—Ç "watcher" –Ω—É–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `BaseTest` —Å –ø–æ–º–æ—â—å—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `@ExtendWith(AllureTestWatcher.class)`.

-----

## üìä –û—Ç—á—ë—Ç—ã: Allure –≤ CI/CD

–í CI-–∫–æ–Ω—Ç–µ–∫—Å—Ç–µ **Allure** ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç—á—ë—Ç, –∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:

- **–ò—Å—Ç–æ—Ä–∏—è —Å–±–æ—Ä–æ–∫**: Allure-–ø–ª–∞–≥–∏–Ω –≤ Jenkins —Ö—Ä–∞–Ω–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—É—Å–∫–æ–≤, –ø–æ–∑–≤–æ–ª—è—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É –ø–∞–¥–µ–Ω–∏–π.
- **–¢—Ä–µ–Ω–¥ —Ç–µ—Å—Ç–æ–≤**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —Ç–µ—Å—Ç—ã —Å—Ç–∞–ª–∏ "flaky" (–Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–º–∏).
- **–û–∫—Ä—É–∂–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Ä–µ–¥–µ –∑–∞–ø—É—Å–∫–∞ (–≤–µ—Ä—Å–∏—è Java, –û–°, URL —Å—Ç–µ–Ω–¥–∞).
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –í –æ—Ç—á—ë—Ç–µ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–¥–∞—á–∏ –≤ Jira –∏–ª–∏ –Ω–∞ –∫–æ–º–º–∏—Ç—ã –≤ Git.

-----

## üîó –ò—Å—Ç–æ—á–Ω–∏–∫–∏:

- [Jenkins Documentation](https://www.jenkins.io/doc/)
- [Jenkins Pipeline Syntax](https://www.jenkins.io/doc/book/pipeline/syntax/)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Allure Framework Documentation](https://docs.qameta.io/allure/)
- [Running Selenium in Headless Mode](https://www.selenium.dev/blog/2023/headless-is-going-away/)
- [CI/CD Concepts by Red Hat](https://www.redhat.com/en/topics/devops/what-is-ci-cd)

-----

[**‚Üê –ù–∞–∑–∞–¥ –∫ –æ–≥–ª–∞–≤–ª–µ–Ω–∏—é**](../README.md)